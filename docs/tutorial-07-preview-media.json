{
  "options": {
    "type": "workflow_options",
    "name": "Tutorial 7: Preview and Media Types",
    "description": "Demonstrates the Preview node displaying text, JSON, images, hint overrides, and browser media capture (webcam, microphone, screen)."
  },
  "nodes": [
    {
      "type": "start_flow",
      "extra": { "name": "Start" }
    },
    {
      "type": "transform_flow",
      "lang": "python",
      "script": "output = 'Hello! This is plain text displayed in a Preview node.'",
      "extra": { "name": "Text Output" }
    },
    {
      "type": "preview_flow",
      "extra": { "name": "Text Preview" }
    },
    {
      "type": "transform_flow",
      "lang": "python",
      "script": "output = {\n    'name': 'Numel Playground',\n    'version': '1.0',\n    'features': ['workflows', 'agents', 'tools'],\n    'stats': {'nodes': 42, 'edges': 56}\n}",
      "extra": { "name": "JSON Output" }
    },
    {
      "type": "preview_flow",
      "extra": { "name": "JSON Preview" }
    },
    {
      "type": "transform_flow",
      "lang": "python",
      "script": "import base64\n# 8x8 red square PNG\npng_hex = '89504e470d0a1a0a0000000d49484452000000080000000808020000004b6d29dc0000001b4944415478da62fccf40060e304041860144311802683a00008f840201eb3bb0710000000049454e44ae426082'\npng_bytes = bytes.fromhex(png_hex)\noutput = 'data:image/png;base64,' + base64.b64encode(png_bytes).decode()",
      "extra": { "name": "Image Output" }
    },
    {
      "type": "preview_flow",
      "extra": { "name": "Image Preview" }
    },
    {
      "type": "transform_flow",
      "lang": "python",
      "script": "output = {'message': 'This will be shown as plain text, not JSON', 'reason': 'The hint field overrides auto-detection'}",
      "extra": { "name": "Dict as Text" }
    },
    {
      "type": "preview_flow",
      "hint": "text",
      "extra": { "name": "Hint: Text" }
    },
    {
      "type": "browser_source_flow",
      "source_id": "webcam_src",
      "device_type": "webcam",
      "mode": "event",
      "interval_ms": 3000,
      "extra": { "name": "Webcam Capture" }
    },
    {
      "type": "event_listener_flow",
      "sources": ["webcam_src"],
      "mode": "any",
      "timeout_ms": 10000,
      "extra": { "name": "Webcam Listener" }
    },
    {
      "type": "preview_flow",
      "extra": { "name": "Webcam Preview" }
    },
    {
      "type": "browser_source_flow",
      "source_id": "mic_src",
      "device_type": "microphone",
      "mode": "event",
      "interval_ms": 5000,
      "audio_format": "wav",
      "extra": { "name": "Mic Capture" }
    },
    {
      "type": "event_listener_flow",
      "sources": ["mic_src"],
      "mode": "any",
      "timeout_ms": 10000,
      "extra": { "name": "Mic Listener" }
    },
    {
      "type": "preview_flow",
      "extra": { "name": "Audio Preview" }
    },
    {
      "type": "browser_source_flow",
      "source_id": "screen_src",
      "device_type": "screen",
      "mode": "event",
      "interval_ms": 3000,
      "extra": { "name": "Screen Capture" }
    },
    {
      "type": "event_listener_flow",
      "sources": ["screen_src"],
      "mode": "any",
      "timeout_ms": 10000,
      "extra": { "name": "Screen Listener" }
    },
    {
      "type": "preview_flow",
      "extra": { "name": "Screen Preview" }
    },
    {
      "type": "end_flow",
      "extra": { "name": "End" }
    }
  ],
  "edges": [
    { "source": 0, "target": 1, "source_slot": "output", "target_slot": "input" },
    { "source": 1, "target": 2, "source_slot": "output", "target_slot": "input" },
    { "source": 0, "target": 3, "source_slot": "output", "target_slot": "input" },
    { "source": 3, "target": 4, "source_slot": "output", "target_slot": "input" },
    { "source": 0, "target": 5, "source_slot": "output", "target_slot": "input" },
    { "source": 5, "target": 6, "source_slot": "output", "target_slot": "input" },
    { "source": 0, "target": 7, "source_slot": "output", "target_slot": "input" },
    { "source": 7, "target": 8, "source_slot": "output", "target_slot": "input" },
    { "source": 0, "target": 9, "source_slot": "output", "target_slot": "input" },
    { "source": 9, "target": 10, "source_slot": "output", "target_slot": "input" },
    { "source": 10, "target": 11, "source_slot": "event", "target_slot": "input" },
    { "source": 0, "target": 12, "source_slot": "output", "target_slot": "input" },
    { "source": 12, "target": 13, "source_slot": "output", "target_slot": "input" },
    { "source": 13, "target": 14, "source_slot": "event", "target_slot": "input" },
    { "source": 0, "target": 15, "source_slot": "output", "target_slot": "input" },
    { "source": 15, "target": 16, "source_slot": "output", "target_slot": "input" },
    { "source": 16, "target": 17, "source_slot": "event", "target_slot": "input" },
    { "source": 2, "target": 18, "source_slot": "output", "target_slot": "input" },
    { "source": 4, "target": 18, "source_slot": "output", "target_slot": "input" },
    { "source": 6, "target": 18, "source_slot": "output", "target_slot": "input" },
    { "source": 8, "target": 18, "source_slot": "output", "target_slot": "input" },
    { "source": 11, "target": 18, "source_slot": "output", "target_slot": "input" },
    { "source": 14, "target": 18, "source_slot": "output", "target_slot": "input" },
    { "source": 17, "target": 18, "source_slot": "output", "target_slot": "input" }
  ]
}
