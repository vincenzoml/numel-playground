{
  "type": "workflow",
  "nodes": [
    {
      "type": "start_flow",
      "extra": {"pos": [0, 0], "name": "Start"}
    },
    {
      "type": "browser_source_flow",
      "device_type": "webcam",
      "mode": "stream",
      "source_id": "cam_cv",
      "extra": {"pos": [220, 0], "name": "Webcam"}
    },
    {
      "type": "computer_vision_flow",
      "task": "pose",
      "model_size": "lite",
      "min_confidence": 0.5,
      "inference_location": "frontend",
      "extra": {"pos": [440, 0], "name": "CV Pose (Browser Worker)"}
    },
    {
      "type": "preview_flow",
      "hint": "image",
      "extra": {"pos": [660, 0], "name": "Pose Preview"}
    },
    {
      "type": "loop_start_flow",
      "condition": true,
      "max_iter": 10000000,
      "extra": {"pos": [880, 0], "name": "Keep Alive"}
    },
    {
      "type": "delay_flow",
      "duration_ms": 5000,
      "extra": {"pos": [1100, 0], "name": "Heartbeat (5s)"}
    },
    {
      "type": "loop_end_flow",
      "extra": {"pos": [1320, 0], "name": "Loop End"}
    },
    {
      "type": "end_flow",
      "extra": {"pos": [1540, 0], "name": "End"}
    }
  ],
  "edges": [
    { "source": 0, "target": 1, "source_slot": "flow_out",       "target_slot": "flow_in" },
    { "source": 1, "target": 2, "source_slot": "flow_out",       "target_slot": "flow_in" },
    { "source": 1, "target": 2, "source_slot": "registered_id",  "target_slot": "source_id" },
    { "source": 2, "target": 3, "source_slot": "flow_out",       "target_slot": "flow_in" },
    { "source": 2, "target": 3, "source_slot": "rendered_image", "target_slot": "input" },
    { "source": 3, "target": 4, "source_slot": "flow_out",       "target_slot": "flow_in" },
    { "source": 4, "target": 5, "source_slot": "flow_out",       "target_slot": "flow_in" },
    { "source": 5, "target": 6, "source_slot": "flow_out",       "target_slot": "flow_in" },
    { "source": 6, "target": 4, "source_slot": "flow_out",       "target_slot": "flow_in", "loop": true },
    { "source": 6, "target": 7, "source_slot": "flow_out",       "target_slot": "flow_in" }
  ]
}
